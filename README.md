# ğŸ“® Dasi Message Center

> æœ¬é¡¹ç›®æ˜¯æˆ‘å°†å®ä¹ æœŸé—´å­¦ä¹ åˆ°çš„ **Spring Bootã€Redisã€RabbitMQã€å‰åç«¯åˆ†ç¦»ã€æ¶ˆæ¯ä¸­å°æ¶æ„** ç­‰å†…å®¹è¿›è¡Œæ•´åˆå¤ç°ï¼ŒçœŸæ­£å®Œæˆçš„ **ç¬¬ä¸€ä¸ªå®Œæ•´å¯è½åœ°çš„åç«¯é¡¹ç›®**ã€‚

## 1. ğŸ’¡ é¡¹ç›®ä»‹ç»

### ç®€ä»‹

Dasi Message Center åŒæ—¶é¢å‘ç®¡ç†ç«¯ä¸ç”¨æˆ·ç«¯æä¾›å®Œæ•´çš„æ¶ˆæ¯æœåŠ¡ä½“ç³»ï¼Œèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€… **å¿«é€Ÿæ­å»ºè‡ªå·±çš„â€œå…¨é“¾è·¯æ¶ˆæ¯ç³»ç»Ÿâ€**ï¼Œä»æ¶ˆæ¯åˆ›å»ºã€é…ç½®ã€å®¡æ ¸ï¼Œåˆ°æŠ•é€’ã€æ¥æ”¶ã€å­˜æ¡£ï¼Œå…¨æµç¨‹ç»Ÿä¸€ã€å¯è§‚æµ‹ã€é«˜å¯é ã€‚

- B ç«¯ï¼šåŒ…æ‹¬**è´¦æˆ·ç®¡ç†ã€éƒ¨é—¨ç®¡ç†ã€è”ç³»äººç®¡ç†ã€æ¨¡æ¿é…ç½®ã€å ä½ç¬¦é…ç½®ã€æ•æ„Ÿè¯é…ç½®ã€æ¶ˆæ¯å‘é€ã€æ¶ˆæ¯æŸ¥è¯¢ã€é”™è¯¯æ—¥å¿—ç­‰ä¸€ä½“åŒ–åå°åŠŸèƒ½**ï¼Œä½¿ä¸šåŠ¡ä¾§èƒ½å¤Ÿä»¥æä½æˆæœ¬æ„å»ºç¨³å®šã€ç»Ÿä¸€çš„æ¶ˆæ¯è°ƒåº¦ä¸æŠ•é€’ç³»ç»Ÿã€‚
- C ç«¯ï¼šæä¾›ç‹¬ç«‹è®¾è®¡çš„ ç«™å†…ä¿¡ç³»ç»Ÿï¼Œç”¨æˆ·å¯åœ¨å‰ç«¯ç³»ç»Ÿä¸­**å®æ—¶æŸ¥çœ‹æ¶ˆæ¯ã€é˜…è¯»é€šçŸ¥ã€è¿›è¡Œå·²è¯»/æœªè¯»ç®¡ç†ã€ä¸‹è½½é™„ä»¶ã€æŸ¥çœ‹å›æ”¶ç«™**ï¼Œå®ç°å®Œæ•´çš„æ¶ˆæ¯å…¨æµç¨‹ä½“éªŒã€‚

### **æŠ€æœ¯æ ˆ**

åç«¯ï¼šJava 17ï¼ŒSpring Boot 3ï¼ŒMySQL 8ï¼ŒMyBatis Plusï¼ŒRedisï¼ŒRabbitMQï¼ŒWebSocketï¼ŒJWTï¼ŒOSSï¼ŒMaven

å‰ç«¯ï¼šViteã€Vue3ã€Element Plusã€Piniaã€Axios

## 2. ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### äººå‘˜ä½“ç³»

- æ”¯æŒ**æƒé™éš”ç¦»**ï¼šè‡ªå®šä¹‰ `@AdminOnly` æ³¨è§£å’Œ `AdminOnlyAspect` åˆ‡é¢ï¼Œåªæœ‰ç®¡ç†å‘˜ ADMIN å¯ä»¥å¯¹è´¦æˆ·ã€éƒ¨é—¨ã€è”ç³»äººè¿›è¡Œä¿®æ”¹
- æ”¯æŒ**æ¡ä»¶æŸ¥è¯¢**ï¼šåˆ©ç”¨ `LambdaQueryWrapper`ï¼Œæ ¹æ®å…³é”®å­—ã€çŠ¶æ€ã€èµ·æ­¢æ—¶é—´ç­‰æ¡ä»¶è¿›è¡Œç­›é€‰
- æ”¯æŒ**åˆ†é¡µæŸ¥è¯¢**ï¼šåˆ©ç”¨ `MyBatis-Plus` å†…ç½®çš„åˆ†é¡µæ’ä»¶ `PaginationInnerInterceptor`ï¼Œå¯ä»¥æ ¹æ®å‰ç«¯ä¼ æ¥çš„é¡µç å’Œé¡µå¤§å°è¿”å›è‡ªå·±è®¾è®¡çš„ `PageResult` å¯¹è±¡
- æ”¯æŒ**æ•°æ®ç¼“å­˜**ï¼Œåˆ©ç”¨ `Redis` å’Œ `SpringCache`ï¼Œæ”¯æŒå³æ—¶ç¼“å­˜å’Œå³æ—¶æ¸…é™¤

### æ¶ˆæ¯ä½“ç³»

- æ”¯æŒ**å®šæ—¶å‘é€**ï¼šåˆ©ç”¨ `RabbitMQ` çš„ `rabbitmq_delayed_message_exchange` æ’ä»¶ï¼Œå¯ä»¥æ ¹æ®æŒ‡å®šæ—¶é—´å»¶è¿Ÿå‘é€
- æ”¯æŒ**æ‰¹é‡å‘é€**ï¼šæ‹†åˆ†ä¸º `Message` å’Œ `Dispatch` å®ä½“ï¼Œå‰è€…è¡¨ç¤ºæ¶ˆæ¯ä¿¡æ¯ï¼Œåè€…è¡¨ç¤ºå…·ä½“åˆ°è”ç³»äººçš„æŠ•é€’è¡Œä¸º
- æ”¯æŒ**é‡å‘æ¶ˆæ¯**ï¼šå‰ç«¯æä¾›æŒ‰é’®ï¼Œå¯ä»¥å•ç‹¬å¯¹æŸä¸ªè”ç³»äººçš„æŠ•é€’è¿›è¡Œé‡æ–°å‘é€
- æ”¯æŒ **AI å¸®å†™**ï¼šå¯ä»¥è°ƒç”¨å¤§é¢„è¨€æ¨¡å‹ï¼Œæ ¹æ®æä¾›éœ€æ±‚è‡ªåŠ¨ç”Ÿæˆå†…å®¹æ–‡æœ¬
- æ”¯æŒ**æ¨¡ç‰ˆå¤ç”¨**ï¼šè‡ªå®šä¹‰ `Template` å®ä½“ï¼Œåœ¨å‘é€æ¶ˆæ¯é¡µé¢é€‰æ‹©å¯¹åº”æ¨¡ç‰ˆå³å¯å°†é¢„å…ˆè®¾ç½®å¥½çš„æ ‡é¢˜ä¸æ–‡æœ¬å¡«å……åˆ°è¾“å…¥æ¡†
- æ”¯æŒ**å ä½ç¬¦æ¸²æŸ“**ï¼šè‡ªå®šä¹‰ `Render` å®ä½“ï¼Œæä¾›ç³»ç»Ÿå›ºå®šå˜é‡ `${#account}, ${#contact}, ${#date}` ç­‰è¿›è¡Œæ¸²æŸ“ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰å ä½ç¬¦ `${key}:value` 

### ç«™å†…ç®±ä½“ç³»

- æ”¯æŒ**å·²è¯»/æœªè¯»**ï¼š
- æ”¯æŒ**å›æ”¶ç«™**ï¼š
- æ”¯æŒ**é™„ä»¶ä¸‹è½½**ï¼š
- æ”¯æŒ

### å‘é€ä½“ç³»

## 3. ğŸ–¥ï¸ é¡¹ç›®æ¼”ç¤º

### é¡µé¢å¸ƒå±€

#### ç™»é™†æ³¨å†Œ

![image-20251117023654619](./assets/image-20251117023654619.png)

#### ä»ªè¡¨ç›˜

![image-20251117023749407](./assets/image-20251117023749407.png)

### äººå‘˜ç®¡ç†

#### è´¦æˆ·

![image-20251117023759573](./assets/image-20251117023759573.png)

#### éƒ¨é—¨

![image-20251117023812808](./assets/image-20251117023812808.png)

#### è”ç³»äºº

![image-20251117023821136](./assets/image-20251117023821136.png)

### æ¶ˆæ¯ç®¡ç†

#### å‘é€

![image-20251117023855015](./assets/image-20251117023855015.png)

#### æŸ¥è¯¢

![image-20251117023902964](./assets/image-20251117023902964.png)

#### æ´¾é€

![image-20251117024009417](./assets/image-20251117024009417.png)

#### å®¡æŸ¥

![image-20251117024022609](./assets/image-20251117024022609.png)

### å†…å®¹ç®¡ç†

#### æ¨¡ç‰ˆ

![image-20251117024031462](./assets/image-20251117024031462.png)

#### æ•æ„Ÿè¯

![image-20251117024105020](./assets/image-20251117024105020.png)

#### å ä½ç¬¦

![image-20251117024116428](./assets/image-20251117024116428.png)

### æ¨¡å¼åˆ‡æ¢

#### æ”¶èµ·

![image-20251117024202233](./assets/image-20251117024202233.png)

#### å…¨å±

![image-20251117024218545](./assets/image-20251117024218545.png)

#### æš—è‰²

![image-20251117024239781](./assets/image-20251117024239781.png)

### ç«™å†…ä¿¡ç®±

#### æ”¶ä»¶ç®±

![image-20251117024300289](./assets/image-20251117024300289.png)

#### å›æ”¶ç«™

![image-20251117024310909](./assets/image-20251117024310909.png)

### æ¶ˆæ¯æ¥æ”¶

#### ç«™å†…ä¿¡

![image-20251117024336131](./assets/image-20251117024336131.png)

#### é‚®ä»¶

![image-20251117024433488](./assets/image-20251117024433488.png)

#### ä¼ä¸šå¾®ä¿¡

![image-20251117024600810](./assets/image-20251117024600810.png)

## 4. ğŸš€ å¿«é€Ÿå¼€å§‹

> éœ€è¦æå‰åˆ©ç”¨ Docker å®‰è£…å¥½ MySQLã€Redisã€RabbitMQï¼Œå¹¶ä¸”é…ç½®å¥½ .envï¼Œä½ å¯ä»¥é€šè¿‡æä¾›çš„ docker-init.sh ä¸€é”®åˆå§‹åŒ–æ‰€æœ‰ä¸­é—´ä»¶
>
> ```bash
> chmod +x docker-init.sh
> ./docker-init.sh
> cp .env.example .env
> ```

### **æ–¹å¼ä¸€ï¼šDocker å¯åŠ¨**

1. æ‹‰å–åç«¯é•œåƒ

    ```bash
    docker pull dasi0227/message-center:1.0
    ```

3. å¯åŠ¨ Dasi MessageCenter

    ```bash
    docker run -d \
      --name message-center \
      --env-file .env \
      --network message-net \
      -p 8080:8080 \
      dasi0227/message-center:1.0
    ```

### **æ–¹å¼äºŒï¼šæœ¬åœ°å¯åŠ¨**

1. åœ¨ VSCode å¯åŠ¨å‰ç«¯

    ```java
    cd FrontEnd
    npm install
    npm run dev
    ```

2. åœ¨ IDEA å¯åŠ¨åç«¯

    ```bash
    cd BackEnd
    ./mvnw spring-boot:run
    ```

### æ–¹å¼ä¸‰ï¼šæ‰“åŒ…å¯åŠ¨

1. ç¼–è¯‘å¹¶ç”Ÿæˆ JAR

    ```bash
    cd BackEnd
    ./mvnw clean package -DskipTests
    ```

2. æŒ‡å®šç¯å¢ƒæ–‡ä»¶å¹¶è¿è¡Œ

    ```java
    export $(grep -v '^#' .env | xargs) && java -jar target/message-center.jar
    ```

    